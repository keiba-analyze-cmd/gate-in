# 🏇 ゲートイン！ タスク一覧

> **最終更新: 2026-02-15**
> このファイルはプロジェクトルートに配置。`git push` で常に最新状態を共有。

---

## 📊 サマリー

| 状態 | 件数 |
|------|------|
| ✅ 完了 | 73 |
| 🔴 未着手 | 17 |
| **合計** | **90** |

### 実施順序（推奨）

```
Phase A        → ✅ 完了（2026-02-14）
Phase B        → ✅ 完了（2026-02-14）
Phase B-fix    → ✅ 完了（2026-02-14）
Phase C-social → ✅ 完了（2026-02-14）
Phase D        → ✅ 完了（2026-02-14）
Phase F        → ✅ 完了（2026-02-14）
Phase E        → ✅ 完了（2026-02-14）
Phase H        → ✅ 完了（2026-02-14）
Phase J        → ✅ 完了（2026-02-14）
Phase I        → ✅ 完了（2026-02-15）
Phase I-polish → ✅ 完了（2026-02-15）
Phase K        → ✅ 完了（2026-02-15）
Phase L        → ✅ 完了（2026-02-15）
Phase G        → 将来機能（3ヶ月〜） ← 次はここ
```

---

## ✅ 完了済み（Phase 0〜B）

| # | フェーズ | カテゴリ | タスク | 完了日 |
|---|---------|---------|--------|--------|
| 1 | Phase A | セキュリティ | 管理画面のアクセス制御 | 2026-02 |
| 2 | Phase A | セキュリティ | RLSポリシー総点検（18テーブル） | 2026-02 |
| 3 | Phase A | セキュリティ | 環境変数の管理 | 2026-02 |
| 4 | Phase A | 法務 | 利用規約の作成・掲載 | 2026-02 |
| 5 | Phase A | 法務 | プライバシーポリシー | 2026-02 |
| 6 | Phase A | 法務 | 特定商取引法に基づく表記 | 2026-02 |
| 7 | Phase A | インフラ | 本番ドメイン gate-in.jp 設定 | 2026-02 |
| 8 | Phase B | データ運用 | レースデータ投入フロー（netkeiba） | 2026-02-14 |
| 9 | Phase B | データ運用 | 管理画面レース登録GUI（4タブ） | 2026-02-14 |
| 10 | Phase B | データ運用 | スクレイピングGUI（プレビュー+一括登録+上書き更新） | 2026-02-14 |
| 11 | Phase B | バグ修正 | 発走時刻タイムゾーン（UTC→JST） | 2026-02-14 |
| 12 | Phase B | バグ修正 | VoteSummary クラッシュ（undefined対策） | 2026-02-14 |
| 13 | Phase B | バグ修正 | VoteDistribution APIキー不一致 | 2026-02-14 |
| 14 | B-fix | バグ修正 | 投票集計RLS修正（全ユーザー集計） | 2026-02-14 |
| 15 | B-fix | バグ修正 | ポイント目安に2〜3番人気追加 | 2026-02-14 |

---

## ✅ Phase C-social: ユーザーフィードバック対応（完了）

| # | タスク | 状態 |
|---|--------|------|
| 16 | TLコメントにリプライ機能 | ✅済 |
| 17 | フォロー/フォロワー一覧ページ | ✅済 |

---

## ✅ Phase D: OGP・SNS・マーケティング（完了）

| # | タスク | 状態 |
|---|--------|------|
| 18 | OGP画像の動的生成 | ✅済 |
| 19 | Twitterカード最適化 | ✅済 |
| 20 | SNSシェアボタン | ✅済 |
| 21 | sitemap.xml / robots.txt | ✅済 |
| 22 | ランディングページ（未ログイン向け） | ✅済 |
| 23 | Google Analytics GA4導入 | ✅済 |

---

## ✅ Phase F: 投票UX改善（完了）

| # | タスク | 状態 |
|---|--------|------|
| 24 | 投票確認モーダル | ✅済 |
| 25 | 投票変更（締切前のみ） | ✅済 |
| 26 | 投票取り消し | ✅済 |
| 27 | 投票締切カウントダウン | ✅済 |
| 28 | 出馬表の馬名にnetkeibaリンク | ✅済 |
| 29 | 過去レースアーカイブ表示 | ✅済 |

---

## ✅ Phase E: ポイント＆ランク（完了）

| # | タスク | 状態 |
|---|--------|------|
| 30 | ポイント付与ロジック（3段階:◎○△） | ✅済 |
| 31 | ランク判定（初心者→鉄人 6段階） | ✅済 |
| 32 | ランクバッジ表示（プロフィール・TL） | ✅済 |
| 33 | ポイント履歴ページ | ✅済 |
| 34 | ランクアップ通知 | ✅済 |
| 35 | ポイントガイドページ | ✅済 |

---

## ✅ Phase H: 投票統計（完了）

| # | タスク | 状態 |
|---|--------|------|
| 36 | 馬別の投票分布（円グラフ） | ✅済 |
| 37 | 人気vs穴馬の統計 | ✅済 |
| 38 | ユーザーの的中率表示 | ✅済 |
| 39 | 投票サマリーの視覚化改善 | ✅済 |

---

## ✅ Phase J: 管理ツール強化（完了）

| # | タスク | 状態 |
|---|--------|------|
| 40 | 管理ダッシュボードKPI | ✅済 |
| 41 | ユーザー一覧・管理 | ✅済 |
| 42 | データエクスポート | ✅済 |
| 43 | 手動ポイント調整 | ✅済 |

---

## ✅ Phase I: コミュニティ安全性・運用品質（完了）

| # | タスク | 状態 |
|---|--------|------|
| 64 | コメント通報機能 | ✅済 |
| 65 | コメント編集・削除 | ✅済 |
| 66 | ユーザーブロック機能 | ✅済 |
| 67 | 管理者コメント管理画面 | ✅済 |
| 68 | ユーザー検索 | ✅済 |
| 69 | レースカレンダー | ✅済 |
| 70 | ヘルスチェックAPI | ✅済 |
| 71 | DBバックアップドキュメント | ✅済 |
| 72 | ステージング環境ドキュメント | ✅済 |

---

## ✅ Phase I-polish: UX改善（完了）

| # | タスク | 状態 |
|---|--------|------|
| 73 | TL投票表示に馬名ピック表示 | ✅済 |
| 74 | 通知を整理（フォロー/リアクション/リプライ） | ✅済 |
| 75 | 大会ページをcoming soonに | ✅済 |
| 76 | 管理者KPIダッシュボード強化 | ✅済 |

---

## ✅ Phase K: 自動化・ポイント改修・UX（完了）

| # | タスク | 状態 |
|---|--------|------|
| 77 | レース結果自動取得（netkeiba→管理承認） | ✅済 |
| 78 | 自動精算Cron（10分間隔） | ✅済 |
| 79 | レース情報自動更新（オッズ・取消馬） | ✅済 |
| 80 | ポイント制度改修（グレード別ボーナス+人気別穴馬） | ✅済 |
| 81 | ランク閾値調整（6ヶ月昇格想定） | ✅済 |
| 82 | ポイントガイドページ更新 | ✅済 |
| 83 | 全ページ戻るボタン追加 | ✅済 |

---

## ✅ Phase L: レースリスト改善・アクティビティ・トップページ（完了 2026-02-15）

| # | タスク | 説明 | 状態 |
|---|--------|------|------|
| 84 | レース一覧3セクション化 | 受付中🟢/投票締切🟠/結果確定⬜の3セクション表示 | ✅済 |
| 85 | 投票結果カード色分け | 的中:緑ボーダー+バッジ / ハズレ:グレー背景 / 未投票:ライトグレー | ✅済 |
| 86 | ユーザーアクティビティフィード | 投票+コメントの時系列統合表示（無限スクロール） | ✅済 |
| 87 | トップページ競馬場別レースカード | netkeiba風。競馬場ごとに次レース1枚表示、リアルタイムカウントダウン | ✅済 |

---

## 🔴 Phase G: 将来機能（3ヶ月〜）

| # | タスク | 説明 | 優先度 |
|---|--------|------|--------|
| 44 | 大会・コンテスト機能 | 週間/月間のランキング争い | 🟡中 |
| 45 | レース回顧投稿 | レース後の振り返りコメント機能 | 🟡中 |
| 46 | 予想の公開/非公開設定 | レース前は非公開、締切後に公開 | 🟡中 |
| 47 | 予想のテンプレート機能 | よく使うフォーマットの保存 | 🟢低 |
| 48 | プロフィール詳細設定 | 自己紹介、得意コース、予想スタイル | 🟢低 |
| 49 | ダークモード対応 | 切り替え可能なカラーテーマ | 🟢低 |
| 50 | PWA対応（オフライン） | Service Worker + マニフェスト | 🟢低 |
| 51 | Push通知 | Web Push でレース開始リマインド | 🟡中 |
| 52 | AI予想サポート | 過去データ分析→推奨馬候補表示 | 🟢低 |
| 53 | マルチレース投票 | 複数レースの一括投票UI | 🟡中 |
| 54 | 実績バッジシステム | 連勝、G1的中等の称号バッジ | 🟢低 |
| 55 | コース別・距離別成績 | 得意条件の分析表示 | 🟢低 |
| 56 | 予想師ランキング | 的中率・回収率ベースのリーダーボード | 🟡中 |

---

## 📝 既知の課題・TODO

- [ ] 京都記念のgradeがOP→G2に修正必要（SQL: `UPDATE races SET grade = 'G2' WHERE name = '京都記念' AND race_date = '2026-02-15';`）
- [ ] 共同通信杯のgradeがOP→G3に修正必要（SQL: `UPDATE races SET grade = 'G3' WHERE name = '共同通信杯' AND race_date = '2026-02-15';`）
- [ ] スクレイプ時のグレード判定ロジック確認（G2/G3が正しく取得できていない可能性 → `src/app/api/admin/scrape/route.ts` 要調査）
- [ ] Cron投票カウント更新の動作確認
